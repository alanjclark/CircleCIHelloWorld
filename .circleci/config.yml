version: 2.1

orbs:
#   # python: circleci/python@2.1.1
  macos: circleci/macos@2.4.0
#   slack: circleci/slack@4.12.5

jobs:
  build:
    # parameters:
    #   xcode_version:
    #     type: string
    #     default: "14.3.1"
    #   device_version:
    #     type: string
    #     default: "iPhone 13 Pro Max"
    macos:
      xcode: 15.1.0
    resource_class: m1-free
    # resource_class: macos.m1.medium.gen1
    steps:
      # - macos/enable-vnc
      - run:
          shell: /bin/zsh
          name: bash ver
          command: |
            echo $0
            #!/bin/sh
            # Echo “TOTO”
            # which `zsh`
            # zsh --version
            # /bin/sh echo "something"
            # eval printf
      # - slack/notify

      # - run:
      #     # shell: /opt/homebrew/bin/bash --login -eo pipefail
      #     command: |
      #       # /opt/homebrew/bin/bash --version
      #       # echo "==========================="
      #       /bin/bash --version
      #       echo "==========================="
      #       bash --version
      # - run: bash --version
      # - run:
      #     command: |
      #       brew update
      #       brew install bash
      # - run: which bash
      # - run: echo $0
      # - run: ls -al /usr/local/bin
      # - run: bash --version
      # - run: ls -al /bin/bash
      # - run:
      #     shell: /opt/homebrew/bin/bash --login -eo pipefail
      #     command: |
      #       /opt/homebrew/bin/bash --version
      #       echo "==========================="
      #       /bin/bash --version
      #       echo "==========================="
      #       bash --version
      # - run: 
      #     command: |
      #       /opt/homebrew/bin/bash --version
      #       echo "==========================="
      #       /bin/bash --version
      #       echo "==========================="
      #       bash --version

      # - when:
      #     condition:
      #       equal: [true, true]
      #     steps:
      #       - persist_to_workspace:
      #           root: .
      #           paths:
      #             - .

      
  # deploy:
  #   macos: 
  #     xcode: "13.4.1"
  #   resource_class: macos.x86.medium.gen2
  #   when:
  #     condition:
  #       equal: [true, true]
  #     steps:
  #       - run: pwd


workflows:
  workflow-mac:
    jobs:
      - build
          # matrix:
          #   parameters:
          #     xcode_version: ["13.4.1"]
          #     device_version: ["iPhone 14 Pro Max"]
          # post-steps:
          #   - run: pwd
      # - deploy